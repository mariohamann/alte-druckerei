---
export interface Props {
	title: string;
	body: string;
	website?: string;
	phone?: string;
	email?: string;
}

const { website, phone, email, title, body }: Props = Astro.props;

// remove last Slash form String
const optimizeUrlForView = (string: string) => {
	string = string.replace("https://", "").replace("http://", "");

	if (string.endsWith("/")) {
		return string.slice(0, -1);
	}
	return string;
};

const contactChannels = [
	{
		// remove last slash "/" from string
		label: optimizeUrlForView(website as string),
		link: website ? website : null,
	},
	{
		label: email,
		link: email ? `mailto:${email}` : null,
	},
	{
		label: phone,
		link: phone ? `tel:${phone}` : null,
	},
].filter((channel) => channel.link);
---

<li
	class='text-white pl-6 py-2 hover:bg-white/10 transition-all duration-500 border-l-8 border-white flex flex-col justify-between'
>
	<h2 class='uppercase font-bold tracking-wider text-lg lg:text-xl'>
		{title}
	</h2>
	<div class='text-base lg:text-lg flex flex-col justify-between h-full'>
		<p class='mt-3 opacity-80'>
			{body}
		</p>
		<div class='mt-3 opacity-80 mb-2 flex'>
			{
				contactChannels.map((channel) => (
					<div class="before:ml-3 before:mr-2 before:content-['Â·'] first-of-type:before:content-none">
						<a
							class='underline underline-offset-4'
							href={channel.link}
							rel='noopener noreferrer'
						>
							{channel.label}
						</a>
					</div>
				))
			}
		</div>
	</div>
</li>
